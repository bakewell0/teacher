var vm=new Vue({el:"#app",data:{tabIndex:0,url:"{folio_id}",range:0,currentRate:0,piePercent:[],portfolio:{}},methods:{switchTab(t){this.tabIndex=t},share(){},follow(){},getPortfolio(){axios.get(window.reqUrl+"/get/portfolio/detail/"+this.url,{params:{token:localStorage.getItem("token")}}).then(t=>{0==t.data.error&&(this.portfolio=t.data.data,google.charts.setOnLoadCallback(this.pie)),403==t.data.error&&(location.href="login.html")}).catch(function(t){console.log(t)})},getQueryString(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),e=window.location.search.substr(1).match(a);return null!=e?unescape(e[2]):null},drawMonthlyChart(){var t=this.basic.Columns;t.unshift("Month"),t.push({type:"boolean",role:"scope"});for(var a=[t],e=0;e<this.basic.Data.length;e++){var o=[],i=this.basic.Data[e][0].year,r=this.basic.Data[e][0].month,s=this.basic.Data[e][0].day;o.push(new Date(i+"-"+r+"-"+s)),o.push(100*this.basic.Data[e][1][0]),o.push(this.basic.Data[e][2]),a.push(o)}var l=google.visualization.arrayToDataTable(a);new google.visualization.LineChart(document.getElementById("monthly_chart")).draw(l,{legend:{position:"none"},chartArea:{margin:"auto"},title:"Cumulative Returns",colors:["#1e5adc"],vAxis:{title:"Return * %"},hAxis:{title:"Time"},width:585,height:250})},pie(){var t=[["portfolio","5"]];this.portfolio.allocations.forEach(a=>{var e=[a.coin_name,parseFloat(a.weight)];t.push(e)});var a=google.visualization.arrayToDataTable(t);new google.visualization.PieChart(document.getElementById("pie")).draw(a,{slices:{4:{offset:.2},12:{offset:.3},14:{offset:.4},15:{offset:.5}},height:250})},getBasic(){axios.get(window.reqUrl+"/get/reports/portfolio/basic/"+this.url,{params:{token:localStorage.getItem("token")}}).then(t=>{0==t.data.error&&(this.basic=t.data.data,google.charts.setOnLoadCallback(this.drawMonthlyChart))}).catch(function(t){console.log(t)})}},created(){google.charts.load("current",{packages:["corechart","controls","bar","timeline","gauge"]}),this.url=this.getQueryString("folio_id"),this.getPortfolio(),this.getBasic()}});
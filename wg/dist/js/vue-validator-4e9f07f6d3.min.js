!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueValidator=e()}(this,function(){"use strict";function t(t,e){window.console&&(console.warn("[vue-validator] "+t),e&&console.warn(e.stack))}function e(t){return/^(-?[1-9]\d*|0)$/.test(t)}function i(t){for(var e=[],i=0,n=t.options.length;i<n;i++){var s=t.options[i];!s.disabled&&s.selected&&e.push(s.value)}return e}function n(t){var e=t.className;return"object"==typeof e&&(e=e.baseVal||""),e}function s(t,e){E&&!/svg$/.test(t.namespaceURI)?t.className=e:t.setAttribute("class",e)}function r(t,e){if(t.classList)t.classList.add(e);else{var i=" "+n(t)+" ";i.indexOf(" "+e+" ")<0&&s(t,(i+e).trim())}}function a(t,e){if(t.classList)t.classList.remove(e);else{for(var i=" "+n(t)+" ",r=" "+e+" ";i.indexOf(r)>=0;)i=i.replace(r," ");s(t,i.trim())}t.className||t.removeAttribute("class")}function o(t,e,i){if(t){if(-1===(e=e.trim()).indexOf(" "))return void i(t,e);for(var n=e.split(/\s+/),s=0,r=n.length;s<r;s++)i(t,n[s])}}function u(t){var e=Object.create(null);return function(i){for(var n=[],s=arguments.length-1;s-- >0;)n[s]=arguments[s+1];return e[i]||(e[i]=t.apply(void 0,n))}}function l(e){var i={};return function(t){return Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}})}(e).forEach(function(e){var n=e.key,s=e.val;i[n]=function(){var e=this.$validation;if(!this._isMounted)return null;var i=s.split(".");if("$validation"!==i.shift())return t("unknown validation result path: "+s),null;var n=e;do{n=n[i.shift()]}while(i.length>0&&void 0!==n);return n}}),i}function h(e,i){return void 0===i&&(i={}),M?void t("already installed."):(d(e),p(e),function(t){t.mixin(g(t))}(e),function(t){var e=O(t);Object.keys(e).forEach(function(i){t.component(i,e[i])})}(e),void(M=!0))}var c={classes:{}},d=function(t){Object.defineProperty(t.config,"validator",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}})},f=Object.freeze({required:function t(e,i){var n=void 0===i||i;if(Array.isArray(e)){if(0!==e.length){for(var s=!0,r=0,a=e.length;r<a&&(s=t(e[r],n),!(n&&!s||!n&&s));r++);return s}return!n}return"number"==typeof e||"function"==typeof e?n:"boolean"==typeof e?e===n:"string"==typeof e?n?e.length>0:e.length<=0:null!==e&&"object"==typeof e?n?Object.keys(e).length>0:Object.keys(e).length<=0:!n},pattern:function(t,e){if("string"!=typeof e)return!1;var i=e.match(new RegExp("^/(.*?)/([gimy]*)$"));return!!i&&new RegExp(i[1],i[2]).test(t)},minlength:function(t,i){return"string"==typeof t?e(i)&&t.length>=parseInt(i,10):!!Array.isArray(t)&&t.length>=parseInt(i,10)},maxlength:function(t,i){return"string"==typeof t?e(i)&&t.length<=parseInt(i,10):!!Array.isArray(t)&&t.length<=parseInt(i,10)},min:function(t,e){return!isNaN(+t)&&!isNaN(+e)&&+t>=+e},max:function(t,e){return!isNaN(+t)&&!isNaN(+e)&&+t<=+e}}),p=function(t){var e=t.util.extend,i=Object.create(null);e(i,f),t.options.validators=i;var n=t.config.optionMergeStrategies;n&&(n.validators=function(t,i){if(!i)return t;if(!t)return i;var n,s=Object.create(null);for(n in e(s,t),i)s[n]=i[n];return s}),t.validator=function(e,i){return void 0===i?t.options.validators[e]:(t.options.validators[e]=i,void(null===i&&delete t.options.validators.id))}},v=function(t){var e=function(t){var e=t.util.extend;return{data:function(){return{valid:!0,dirty:!1,touched:!1,modified:!1,results:{}}},computed:{invalid:function(){return!this.valid},pristine:function(){return!this.dirty},untouched:function(){return!this.touched},result:function(){var t={valid:this.valid,invalid:this.invalid,dirty:this.dirty,pristine:this.pristine,touched:this.touched,untouched:this.untouched,modified:this.modified},e=this.results;return this._validityKeys.forEach(function(i){if(t[i]=e[i],t[i].errors){var n=t.errors||[];t[i].errors.forEach(function(t){n.push(t)}),t.errors=n}}),t}},watch:{results:function(t,e){var i=this._validityKeys,n=this.results;this.valid=this.checkResults(i,n,"valid",!0),this.dirty=this.checkResults(i,n,"dirty",!1),this.touched=this.checkResults(i,n,"touched",!1),this.modified=this.checkResults(i,n,"modified",!1)}},created:function(){this._validities=Object.create(null),this._validityWatchers=Object.create(null),this._validityKeys=[],this._committing=!1},destroyed:function(){var t=this;this._validityKeys.forEach(function(e){t._validityWatchers[e](),delete t._validityWatchers[e],delete t._validities[e]}),delete this._validityWatchers,delete this._validities,delete this._validityKeys},methods:{register:function(t,e){var i=this;this._validities[t]=e,this._validityKeys=Object.keys(this._validities),this.setResults(t,{}),this.withCommit(function(){i._validityWatchers[t]=e.$watch("result",function(e,n){i.setResults(t,e)},{deep:!0,immediate:!0})})},unregister:function(t){var e=this;this._validityWatchers[t](),delete this._validityWatchers[t],delete this._validities[t],this._validityKeys=Object.keys(this._validities),this.withCommit(function(){e.resetResults(t)})},validityCount:function(){return this._validityKeys.length},isRegistered:function(t){return t in this._validities},getValidityKeys:function(){return this._validityKeys},checkResults:function(t,e,i,n){for(var s=n,r=0;r<t.length;r++)if(e[t[r]][i]!==n){s=!n;break}return s},setResults:function(t,i){var n=this,s={};this._validityKeys.forEach(function(t){s[t]=e({},n.results[t])}),s[t]=e({},i),this.results=s},resetResults:function(t){var i=this,n={};this._validityKeys.forEach(function(s){t&&t!==s&&(n[s]=e({},i.results[s]))}),this.results=n},withCommit:function(t){var e=this._committing;this._committing=!0,t(),this._committing=e}}}}(t),i=function(e){void 0===e&&(e={}),this._result={},this._host=e.host,this._named=Object.create(null),this._group=Object.create(null),this._validities=Object.create(null),this._beginDestroy=!1,t.util.defineReactive(this._host,"$validation",this._result)};return i.prototype.register=function(i,n,s){if(void 0===s&&(s={}),this._validityManager||(this._validityManager=new t(e),this._watchValidityResult()),!this._validities[i]){this._validities[i]=n;var r=s.named,a=s.group,o=a?this._getValidityGroup("group",a)||this._registerValidityGroup("group",a):null,u=r?this._getValidityGroup("named",r)||this._registerValidityGroup("named",r):null;r&&a&&u&&o?(o.register(i,n),!u.isRegistered(a)&&u.register(a,o),!this._validityManager.isRegistered(r)&&this._validityManager.register(r,u)):u?(u.register(i,n),!this._validityManager.isRegistered(r)&&this._validityManager.register(r,u)):o?(o.register(i,n),!this._validityManager.isRegistered(a)&&this._validityManager.register(a,o)):this._validityManager.register(i,n)}},i.prototype.unregister=function(t,e){if(void 0===e&&(e={}),this._validityManager&&this._validities[t]){delete this._validities[t];var i=e.named,n=e.group,s=n?this._getValidityGroup("group",n):null,r=i?this._getValidityGroup("named",i):null;i&&n&&r&&s?(s.unregister(t),0===s.validityCount()&&(r.isRegistered(n)&&r.unregister(n),this._unregisterValidityGroup("group",n)),0===r.validityCount()&&(this._validityManager.isRegistered(i)&&this._validityManager.unregister(i),this._unregisterValidityGroup("named",i))):i&&r?(r.unregister(t),0===r.validityCount()&&(this._validityManager.isRegistered(i)&&this._validityManager.unregister(i),this._unregisterValidityGroup("named",i))):n&&s?(s.unregister(t),0===s.validityCount()&&(this._validityManager.isRegistered(n)&&this._validityManager.unregister(n),this._unregisterValidityGroup("group",n))):this._validityManager.unregister(t)}},i.prototype.destroy=function(){var t=this,e=Object.keys(this._validities),i=Object.keys(this._named),n=Object.keys(this._group);e.forEach(function(e){n.forEach(function(i){var n=t._getValidityGroup("group",i);n&&n.isRegistered(i)&&n.unregister(e)}),i.forEach(function(i){var n=t._getValidityGroup("named",i);n&&n.isRegistered(e)&&n.unregister(e)}),t._validityManager.isRegistered(e)&&t._validityManager.unregister(e),delete t._validities[e]}),n.forEach(function(e){i.forEach(function(i){var n=t._getValidityGroup("named",i);n&&n.isRegistered(e)&&n.unregister(e)}),t._validityManager.isRegistered(e)&&t._validityManager.unregister(e),t._unregisterValidityGroup("group",e)}),i.forEach(function(e){t._validityManager.isRegistered(e)&&t._validityManager.unregister(e),t._unregisterValidityGroup("named",e)}),this._beginDestroy=!0},i.prototype._getValidityGroup=function(t,e){return"named"===t?this._named[e]:this._group[e]},i.prototype._registerValidityGroup=function(i,n){var s="named"===i?this._named:this._group;return s[n]=new t(e),s[n]},i.prototype._unregisterValidityGroup=function(t,e){var i="named"===t?this._named:this._group;i[e]&&(i[e].$destroy(),delete i[e])},i.prototype._watchValidityResult=function(){var e=this;this._watcher=this._validityManager.$watch("results",function(i,n){t.set(e._host,"$validation",i),e._beginDestroy&&e._destroyValidityMananger()},{deep:!0})},i.prototype._unwatchValidityResult=function(){this._watcher(),delete this._watcher},i.prototype._destroyValidityMananger=function(){this._unwatchValidityResult(),this._validityManager.$destroy(),this._validityManager=null},i},g=function(t){var e=v(t);return{beforeCreate:function(){this._validation=new e({host:this})}}},y={field:{type:String,required:!0},validators:{type:[String,Array,Object],required:!0},group:{type:String},multiple:{type:Boolean},autotouch:{type:String,default:function(){return"on"}},classes:{type:Object,default:function(){return{}}}},_={valid:"valid",invalid:"invalid",touched:"touched",untouched:"untouched",pristine:"pristine",dirty:"dirty",modified:"modified"},m=function(t){function e(t,e,i){void 0===i&&(i=void 0),Array.isArray(e)?e.forEach(function(e){t[e]=i}):Object.keys(e).forEach(function(n){var r=e[n]&&e[n].props&&s(e[n].props)?e[n].props:null;r?Object.keys(r).forEach(function(e){t[n]={},t[n][e]=i}):t[n]=i})}var i=t.util,n=i.extend,s=i.isPlainObject;return{props:n({child:{type:Object,required:!0},value:{type:Object}},y),data:function(){var t=function(t){return"string"==typeof t?[t]:t}(this.validators);return{results:function(t){var i={};return e(i,t,void 0),i}(t),valid:!0,dirty:!1,touched:!1,modified:!1,progresses:function(t){var i={};return e(i,t,""),i}(t)}}}},b=function(t){function e(t,e,i,n,s){var r={field:e,validator:i};n&&(r.message=n),s&&(r.prop=s),t.errors=t.errors||[],t.errors.push(r)}var i=t.util.isPlainObject;return{invalid:function(){return!this.valid},pristine:function(){return!this.dirty},untouched:function(){return!this.touched},result:function(){var t=this,n={valid:this.valid,invalid:this.invalid,dirty:this.dirty,pristine:this.pristine,touched:this.touched,untouched:this.untouched,modified:this.modified};return this._keysCached(this._uid.toString(),this.results).forEach(function(s){var r=t.results[s];"boolean"==typeof r?r?n[s]=!1:(e(n,t.field,s),n[s]=!r):"string"==typeof r?(e(n,t.field,s,r),n[s]=r):i(r)?Object.keys(r).forEach(function(i){var a=r[i];n[i]=n[i]||{},"boolean"==typeof a?a?n[i][s]=!1:(e(n,t.field,s,void 0,i),n[i][s]=!a):"string"==typeof a?(e(n,t.field,s,a,i),n[i][s]=a):n[i][s]=!1}):n[s]=!1}),n},progress:function(){return function t(e,n){for(var s="",r=0;r<e.length;r++){var a=n[e[r]];if("string"==typeof a&&a){s=a;break}if(i(a)&&!(s=t(Object.keys(a),a)))break}return s}(this._keysCached(this._uid.toString(),this.results),this.progresses)}}},w="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window)&&window.navigator.userAgent.toLowerCase(),E=w&&w.indexOf("msie 9.0")>0,V=function(t){var e=function(t){var e=t.util.looseEqual,n=function(t){this._vm=t,this.initValue=this.getValue(),this.attachValidity()};return n.prototype.attachValidity=function(){this._vm.$el.$validity=this._vm},n.prototype.getValue=function(){var t=this._vm.$el;return"SELECT"===t.tagName?i(t):"checkbox"===t.type?t.checked:t.value},n.prototype.checkModified=function(){var t=this._vm.$el;return"SELECT"===t.tagName?!e(this.initValue,i(t)):"checkbox"===t.type?!e(this.initValue,t.checked):!e(this.initValue,t.value)},n.prototype.listenToucheableEvent=function(){this._vm.$el.addEventListener("focusout",this._vm.willUpdateTouched)},n.prototype.unlistenToucheableEvent=function(){this._vm.$el.removeEventListener("focusout",this._vm.willUpdateTouched)},n.prototype.listenInputableEvent=function(){var t=this._vm,e=t.$el;"SELECT"===e.tagName?e.addEventListener("change",t.handleInputable):"checkbox"===e.type?e.addEventListener("change",t.handleInputable):e.addEventListener("input",t.handleInputable)},n.prototype.unlistenInputableEvent=function(){var t=this._vm,e=t.$el;"SELECT"===e.tagName?e.removeEventListener("change",t.handleInputable):"checkbox"===e.type?e.removeEventListener("change",t.handleInputable):e.removeEventListener("input",t.handleInputable)},n}(t),n=function(t){var e=t.util.looseEqual,i=function(t){this._vm=t,this.initValue=this.getValue(),this.attachValidity()};return i.prototype.attachValidity=function(){var t=this;this._vm.$el.$validity=this._vm,this._eachItems(function(e){e.$validity=t._vm})},i.prototype.getValue=function(){return this._getCheckedValue()},i.prototype.checkModified=function(){return!e(this.initValue,this._getCheckedValue())},i.prototype.listenToucheableEvent=function(){var t=this;this._eachItems(function(e){e.addEventListener("focusout",t._vm.willUpdateTouched)})},i.prototype.unlistenToucheableEvent=function(){var t=this;this._eachItems(function(e){e.removeEventListener("focusout",t._vm.willUpdateTouched)})},i.prototype.listenInputableEvent=function(){var t=this;this._eachItems(function(e){e.addEventListener("change",t._vm.handleInputable)})},i.prototype.unlistenInputableEvent=function(){var t=this;this._eachItems(function(e){e.removeEventListener("change",t._vm.handleInputable)})},i.prototype._getCheckedValue=function(){var t=[];return this._eachItems(function(e){!e.disabled&&e.checked&&t.push(e.value)}),t},i.prototype._getItems=function(){return this._vm.$el.querySelectorAll('input[type="checkbox"], input[type="radio"]')},i.prototype._eachItems=function(t){for(var e=this._getItems(),i=0;i<e.length;i++)t(e[i])},i}(t),s=function(t){function e(t){var e="string"==typeof t?[t]:t,i=[];return s(e)&&Object.keys(e).forEach(function(t){var n=e[t]&&e[t].props&&s(e[t].props)?e[t].props:null;n&&Object.keys(n).forEach(function(t){~i.indexOf(t)||i.push(t)})}),i}var i=t.util,n=i.looseEqual,s=i.isPlainObject,r=function(t,i,n){this._vm=t,this._vnode=i,this._validatorProps=n||u(e),this.initValue=this.getValue(),this._watchers=[],this.attachValidity()};return r.prototype.attachValidity=function(){this._vm.$el.$validity=this._vm},r.prototype.getValidatorProps=function(){var t=this._vm;return this._validatorProps(t._uid.toString(),t.validators)},r.prototype.getValue=function(){var t=this,e={};return this.getValidatorProps().forEach(function(i){e[i]=t._vnode.child[i]}),e},r.prototype.checkModified=function(){return!n(this.initValue,this.getValue())},r.prototype.listenToucheableEvent=function(){this._vm.$el.addEventListener("focusout",this._vm.willUpdateTouched)},r.prototype.unlistenToucheableEvent=function(){this._vm.$el.removeEventListener("focusout",this._vm.willUpdateTouched)},r.prototype.listenInputableEvent=function(){var t=this;this.getValidatorProps().forEach(function(e){t._watchers.push(t._vnode.child.$watch(e,t._vm.watchInputable))})},r.prototype.unlistenInputableEvent=function(){this._watchers.forEach(function(t){t()}),this._watchers=[]},r}(t);return{SingleElement:e,MultiElement:n,ComponentElement:s}},k=function(t){function e(t){this.$emit("input",{result:this.result,progress:this.progress,progresses:this.progresses})}var i=V(t),n=i.SingleElement,s=i.MultiElement,a=i.ComponentElement;return{created:function(){this._elementable=null,this._keysCached=u(function(t){return Object.keys(t)}),this._modified=!1,this._watchValidationRawResults();var t=this.$options.propsData?this.$options.propsData.validation:null;if(t){var e=t.instance,i=t.name,n=this.group;e.register(this.field,this,{named:i,group:n})}},destroyed:function(){var t=this.$options.propsData?this.$options.propsData.validation:null;if(t){var e=t.instance,i=t.name,n=this.group;e.unregister(this.field,{named:i,group:n})}this._unwatchResultProp&&(this._unwatchResultProp(),this._unwatchResultProp=null),this._unwatchProgressProp&&(this._unwatchProgressProp(),this._unwatchProgressProp=null),this._unwatchValidationRawResults(),this._elementable.unlistenInputableEvent(),"on"===this.autotouch&&this._elementable.unlistenToucheableEvent(),this._elementable=null},mounted:function(){var t;this._elementable=function(t,e){return t.multiple?new s(t):function(t){return!t.child&&!t.componentOptions&&t.tag}(e)?new n(t):function(t){return t.child&&t.componentOptions&&t.tag&&t.tag.match(/vue-component/)}(e)?new a(t,e):null}(this,this._vnode),this._elementable&&("on"===this.autotouch&&this._elementable.listenToucheableEvent(),this._elementable.listenInputableEvent()),((t=this.$vnode)&&t.data&&t.data.directives||[]).find(function(t){return"model"===t.name})&&(this._unwatchResultProp=this.$watch("result",e),this._unwatchProgressProp=this.$watch("progress",e)),o(this.$el,this.classes.untouched,r),o(this.$el,this.classes.pristine,r)}}},$=function(t){var e=t.util.extend,i={};return e(i,function(t){return{_fireEvent:function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n;(n=this).$emit.apply(n,[t].concat(e))}}}()),e(i,function(t){function e(t,i,s){void 0===s&&(s=void 0);for(var r=0;r<t.length;r++){var a=i[t[r]];n(a)?e(Object.keys(a),a,s):i[t[r]]=s}}function i(t,e){for(var s=!0,r=0;r<t.length;r++){var a=e[t[r]];if("boolean"==typeof a&&!a){s=!1;break}if("string"==typeof a&&a){s=!1;break}if(n(a)&&!(s=i(Object.keys(a),a)))break}return s}var n=t.util.isPlainObject;return{getValue:function(t){return this._elementable.getValue()},checkModified:function(){return this._elementable.checkModified()},willUpdateTouched:function(t){this.touched||(this.touched=!0,o(this.$el,this.classes.touched,r),o(this.$el,this.classes.untouched,a),this._fireEvent("touched"))},willUpdateDirty:function(){!this.dirty&&this.checkModified()&&(this.dirty=!0,o(this.$el,this.classes.dirty,r),o(this.$el,this.classes.pristine,a),this._fireEvent("dirty"))},willUpdateModified:function(){var t=this.modified=this.checkModified();this._modified!==t&&(this._modified=t,o(this.$el,this.classes.modified,t?r:a),this._fireEvent("modified",t))},handleInputable:function(t){this.willUpdateDirty(),this.willUpdateModified()},watchInputable:function(t){this.willUpdateDirty(),this.willUpdateModified()},reset:function(){this._unwatchValidationRawResults();var t=this._keysCached(this._uid.toString(),this.results);e(t,this.results,void 0),e(t,this.progresses,""),o(this.$el,this.classes.valid,a),o(this.$el,this.classes.invalid,a),o(this.$el,this.classes.touched,a),o(this.$el,this.classes.untouched,r),o(this.$el,this.classes.dirty,a),o(this.$el,this.classes.pristine,r),o(this.$el,this.classes.modified,a),this.valid=!0,this.dirty=!1,this.touched=!1,this.modified=!1,this._modified=!1,this._watchValidationRawResults()},_walkValid:i,_watchValidationRawResults:function(){var t=this;this._unwatchResults=this.$watch("results",function(e){t.valid=i(t._keysCached(t._uid.toString(),t.results),t.results),t.valid?(o(t.$el,t.classes.valid,r),o(t.$el,t.classes.invalid,a)):(o(t.$el,t.classes.valid,a),o(t.$el,t.classes.invalid,r)),t._fireEvent(t.valid?"valid":"invalid")},{deep:!0})},_unwatchValidationRawResults:function(){this._unwatchResults(),this._unwatchResults=void 0,delete this._unwatchResults},touch:function(){this.willUpdateTouched()}}}(t)),e(i,function(t){var e=t.util,i=e.extend,n=e.isPlainObject,s=e.resolveAsset;return{_resolveValidator:function(t){var e=this.child&&this.child.context?this.child.context.$options:this.$options;return s(e,"validators",t)},_getValidateRawDescriptor:function(t,e,i){var s=this._resolveValidator(t);if(!s)return null;var r=null,a=null,o=null;if(n(s))s.check&&"function"==typeof s.check&&(r=s.check),s.message&&(o=s.message);else{if("function"!=typeof s)return null;r=s}if(!r)return null;var u=null,l=this.validators;n(l)&&(n(l[t])?l[t].props&&n(l[t].props)?u=l[t].props:(l[t].rule&&(a=l[t].rule),l[t].message&&(o=l[t].message)):a=l[t]);var h={fn:r,value:i,field:e};return a&&(h.rule=a),o&&(h.msg=o),u&&(h.props=u),h},_getValidateDescriptors:function(t,e,n){var s=[],r=this._getValidateRawDescriptor(t,this.field,n);if(!r)return s;if(r.props)Object.keys(!r.props).forEach(function(e){var i={fn:r.fn,name:t,value:r.value[e],field:r.field,prop:e};r.props[e].rule&&(i.rule=r.props[e].rule),r.props[e].message&&(i.msg=r.props[e].message),s.push(i)});else{var a={name:t};i(a,r),s.push(a)}return s},_resolveMessage:function(t,e,i){return i||(e?"function"==typeof e?e(t):e:void 0)},_invokeValidator:function(t,e,i){var n=this,s=t.fn,r=t.field,a=t.rule,o=t.msg,u=s.call(this.child.context,e,a);"function"==typeof u?u(function(){i(!0)},function(t){i(!1,n._resolveMessage(r,o,t))}):function(t){return t&&"function"==typeof t.then}(u)?u.then(function(){i(!0)},function(t){i(!1,n._resolveMessage(r,o,t))}).catch(function(t){i(!1,n._resolveMessage(r,o,t.message))}):i(u,!1===u?this._resolveMessage(r,o):void 0)},_validate:function(t,e,i){var n=this,s=this._getValidateRawDescriptor(t,this.field,e);if(s&&!s.props){if(this.progresses[t])return!1;this.progresses[t]="running",this.$nextTick(function(){n._invokeValidator(s,s.value,function(e,s){if(n.progresses[t]="",n.results[t]=s||e,i)n.$nextTick(function(){i.call(n,null,e,s)});else{var r={result:e};s&&(r.msg=s),n._fireEvent("validate",t,r)}})})}else if(s&&s.props)Object.keys(s.props).forEach(function(e){if(!n.progresses[t][e]){n.progresses[t][e]="running";var i=s.value,r={fn:s.fn,value:i[e],field:s.field};s.props[e].rule&&(r.rule=s.props[e].rule),s.props[e].message&&(r.msg=s.props[e].message),n.$nextTick(function(){n._invokeValidator(r,r.value,function(i,s){n.progresses[t][e]="",n.results[t][e]=s||i;var r={prop:e,result:i};s&&(r.msg=s),n._fireEvent("validate",t,r)})})}});else{var r=new Error;i?i.call(this,r):this._fireEvent("validate",t,r)}return!0},_syncValidates:function(t,e){var i=this,n=this._keysCached(this._uid.toString(),this.results),s=this.getValue(),r=[];n.forEach(function(e){i._getValidateDescriptors(e,t,s).forEach(function(t){r.push(t)})});var a=0,o=r.length;r.forEach(function(t){var n=t.name,s=t.prop;return!s&&i.progresses[n]||s&&i.progresses[n][s]?void(++a===o&&e(i._walkValid(i._keysCached(i._uid.toString(),i.results),i.results))):(s?i.progresses[n][s]="running":i.progresses[n]="running",void i.$nextTick(function(){i._invokeValidator(t,t.value,function(t,r){s?(i.progresses[n][s]="",i.results[n][s]=r||t):(i.progresses[n]="",i.results[n]=r||t),++a===o&&e(i._walkValid(i._keysCached(i._uid.toString(),i.results),i.results))})}))})},validate:function(){for(var t=this,e=[],i=arguments.length;i--;)e[i]=arguments[i];var s,r,a,o=!0;return 3===e.length?(s=[e[0]],r=e[1],a=e[2]):2===e.length?n(e[0])?(s=[e[0].validator],r=e[0].value||this.getValue(),a=e[1]):(s=this._keysCached(this._uid.toString(),this.results),r=e[0],a=e[1]):1===e.length?(s=this._keysCached(this._uid.toString(),this.results),r=this.getValue(),a=e[0]):(s=this._keysCached(this._uid.toString(),this.results),r=this.getValue(),a=null),3===e.length||2===e.length&&n(e[0])?o=this._validate(s[0],r,a):s.forEach(function(e){o=t._validate(e,r,a)}),o}}}(t)),i},R=function(t){var e=t.util.extend;return{functional:!0,props:{name:{type:String},tag:{type:String,default:"form"}},render:function(t,i){var n=i.props,s=i.data,r=i.parent,a=i.children;if(i.slots,!r._validation)return a;var o=n.tag||"form";!function t(e,i,n){n.forEach(function(n){n&&n.componentOptions&&n.componentOptions.propsData&&"validity-control"===n.componentOptions.tag&&(n.componentOptions.propsData.validation={instance:e,name:i}),n.children&&t(e,i,n.children)})}(r._validation,n.name,a);var u=e({attrs:{}},s);return"form"===o&&(u.attrs.novalidate=!0),t(o,u,a)}}},O=function(t){return{"validity-control":function(t){var e=t.util.extend,i=m(t),n=i.props,s=i.data,r=b(t),a=k(t),o={props:n,data:s,render:{render:function(t){return this.child}}.render,computed:r,methods:$(t)};return e(o,a),o}(t),validity:function(t){var e=t.util.extend;return{functional:!0,props:y,render:function(i,n){var s=n.props,r=n.data;return n.children.map(function(n){if(!n.tag)return n;var a=e({},r);return a.props=e({},s),a.props.classes=e(e(e({},_),t.config.validator.classes),a.props.classes),a.props.child=n,i("validity-control",a)})}}}(t),"validity-group":function(t){var e=t.util.extend;return{functional:!0,props:e({tag:{type:String,default:"fieldset"}},y),render:function(i,n){var s=n.props,r=n.data,a=n.children,o=i(s.tag,a),u=e({},r);return u.props=e({},s),u.props.classes=e(e(e({},_),t.config.validator.classes),u.props.classes),u.props.child=o,u.props.multiple=!0,i("validity-control",u)}}}(t),validation:R(t)}},M=!1;return h.mapValidation=l,h.version="3.0.0-alpha.2","undefined"!=typeof window&&window.Vue&&window.Vue.use(h),{install:h,mapValidation:l}});